%\documentclass{jarticle}
%\documentclass[twocolumn,fleqn]{jarticle}
\documentclass[fleqn,10pt]{jarticle}

\usepackage{comment}
\usepackage{listings}
\lstset{
% language=Scheme,
 basicstyle=\ttfamily\footnotesize,
%  frame=tbrl, %枠を上下左右に表示
 breaklines=true, % 行が長くなった場合に改行
 numbers=none,
 breaklines=true, %折り返し
% xleftmargin=0
}

\usepackage{multicol}
\usepackage{graphicx}
\usepackage{txfonts}
%\DeclareMathSymbol{v}{\mathalpha}{lettersA}{``33}
\usepackage{bm}
\usepackage{overcite}
 
\textwidth 175mm
\textheight 255mm
 
\addtolength{\topmargin}{-30mm}
\addtolength{\oddsidemargin}{-30mm}
\addtolength{\evensidemargin}{-30mm}
\columnsep 10mm
\columnseprule 0mm
\setlength{\parindent}{1zw}
%\pagestyle{empty}
 
\def\bf{\normalfont\kanjifamily{gt}%
 \selectfont\sffamily}
 
\setcounter{secnumdepth}{4}
\def\thesection{\arabic{section}.\hspace*{-.7em}}
\def\thesubsection{\arabic{section}.\arabic{subsection}\hspace*{-.7em}}
\def\thesubsubsection{%
\arabic{section}.\arabic{subsection}.\arabic{subsubsection}\hspace*{-.7em}}
\def\theparagraph{\alph{paragraph}.\hspace*{-.7em}}
\def\thesubparagraph{\roman{subparagraph})}
 
\makeatletter
\def\section{\@startsection{section}{1}{\z@}%
 {3.5ex plus -0.1ex minus  -.2ex}{0.01ex}{\bf}} %\uppercase
\def\subsection{\@startsection{subsection}{2}{\z@}%
 {3.5ex plus -0.1ex minus  -.2ex}{0.01ex}{\bf}}
\def\subsubsection{\@startsection{subsubsection}{3}{\z@}%
 {-0.01ex}{-1.01em}{\bf}}
\def\paragraph{\@startsection{paragraph}{4}{\z@}%
 {-0.01ex}{-1.01em}{\bf}}
\def\subparagraph{\@startsection{subparagraph}{5}{\z@}%
 {-0.01ex}{-1.01em}{\bf}}
\makeatletter
 
\makeatletter
\long\def\@makecaption#1#2{
 \setbox\@tempboxa\hbox{\small #1 #2}
 \ifdim \wd\@tempboxa > \hsize \unhbox\@tempboxa\par \else \hbox
 to\hsize{\hfil\box\@tempboxa\hfil}
 \fi}
\def\thefigure{\@arabic\c@figure}
\def\fnum@figure{Fig.\thefigure \mbox{ }}
\def\thetable{\@arabic\c@figure} % \def\thetable{\@Roman\c@table}
\def\fnum@table{Table \thetable \mbox{ }}
\makeatletter

\newenvironment{itemize2}%  
{%
   \begin{list}{$\bullet$\ \ }% 見出し記号／直後の空白を調節
   {%
      \setlength{\itemindent}{0pt}
      \setlength{\leftmargin}{1zw}%  左のインデント
       \setlength{\rightmargin}{0zw}% 右のインデント
       \setlength{\labelsep}{0zw}%    黒丸と説明文の間
       \setlength{\labelwidth}{2zw}%  ラベルの幅
       \setlength{\itemsep}{0em}%     項目ごとの改行幅
       \setlength{\parsep}{0em}%      段落での改行幅
       \setlength{\listparindent}{0zw}% 段落での一字下り
   }
}{%
   \end{list}%
}
 
\def\thebibliography#1{
\section*{参考文献} %\section*{REFERENCES}
 \list
 {[\hfil\arabic{enumi}\hfil]\hspace*{1pt}}{
% \settowidth\labelwidth{[#1]}\leftmargin\labelwidth
 \labelwidth 0pt \leftmargin 0pt
 \topsep 0pt \partopsep 0pt \itemsep 0pt \parsep 0pt
 \rightmargin 0pt \listparindent 0pt \itemindent 0pt
 \labelsep 0pt
 \usecounter{enumi}}
 \sloppy
 \sfcode`\.=1000\relax}
\let\endthebibliography=\endlist
 
\newcommand\ord{{\rm d}}
 
\begin{document}
\twocolumn[]

\section{スタティックCMOS設計}
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\subsection{真理値表→回路図}
カルノー図 → 負リテラルの和積形 → NMOS側は相補的に作る (000:1 があれば作れる?)

\subsection{立ち上がり時間と立ち下がり時間を一致させる}
チャネル抵抗比→ PMOS:NMOS=2:1(講義の仮定).
のでインバータのPMOS大きさ(幅)は2倍(抵抗半分→一致)とする
$R \propto 1/チャネル幅$
$R \propto チャネル長$

\begin{itemize2}
\item サイズ$=$チャネル幅
\item サイズ$\propto$抵抗$\propto$立ち上がり時間立ち下がり時間
\item 並列:どれかひとつがONのとき一番重い(変えない)
\item 直列:個数倍する
\end{itemize2}
\subsection{SPICE}
\begin{lstlisting}
* Format of pulse input:
* pulse v_initial v_final t_delay t_rise t_fall t_pulsewidth t_period
VinA XA 0 PULSE(0 2.5  1ns 0.1ns 0.1ns 4ns 33ns)

* Define power supply
Vdd Vdd 0 2.5

* MOSFETs General form: MXXXX ND NG NS NB MNAME <L=VAL> <W=VAL>
.subckt nand2 In1 In2 Out Vdd
*    ND  NG  NS  NB
mp1  Out In1 Vdd Vdd  cmosp l=0.25u w=6.83990u
mp2  Out In2 Vdd Vdd  cmosp l=0.25u w=6.83990u
mn1  Out In1 N   0    cmosn l=0.25u w=6.83990u
mn2  N   In2 0   0    cmosn l=0.25u w=6.83990u
.ends

r0    in   out   320
c0    in   0   0.64p
\end{lstlisting}

\section{Logical Effort}
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\begin{itemize2}
\item Logical Effort: 同じ駆動力を持ち,立ち上がりと立ち下がりが等しいようなINVの入力容量に対してどれだけ入力容量が大きいか
\item 説明「このゲートは同じ立ち上がり達下がり時間で入力の重さが(2+3)/(1+2)=5/3倍になっている」
\end{itemize2}
\begin{table}[h]
  \label{tb:let}
  \begin{center}
    \setlength{\tabcolsep}{3pt}
    \footnotesize
    % BEGIN RECEIVE ORGTBL let
\begin{tabular}{lrllrll}
入力数 & 1 & 2 & 3 & 4 & 5 & N \\
\hline
INV & 1 &  &  &  &  &  \\
NAND &  & 4/3 & 5/3 & 2 & 7/3 & (N+2)/3 \\
NOR &  & 5/3 & 7/3 & 3 & 11/3 & (2N+1)/3 \\
\end{tabular}
    % END RECEIVE ORGTBL let
  \end{center}
\end{table}%
\begin{comment}
  #+ORGTBL: SEND let orgtbl-to-latex :efmt "$%s\\times10^{%s}$"
  | 入力数 | 1 | 2   | 3   | 4 | 5    | N        |
  |--------+---+-----+-----+---+------+----------|
  | INV    | 1 |     |     |   |      |          |
  | NAND   |   | 4/3 | 5/3 | 2 | 7/3  | (N+2)/3  |
  | NOR    |   | 5/3 | 7/3 | 3 | 11/3 | (2N+1)/3 |
\end{comment}

\begin{itemize2}
\item $F.O.(all)=loadcap/inputcap$
\item $L.E.(all)=\prod L.E.$
\item $Gain(all)=F.O.(all) \times L.E.(all)$
\item $Gain/step=\{Gain(all)\}^{1/steps}$(いきなりこれ求めてもよし)
\item $F.O.何か = (Gain/step)/(L.E.何か)$
\end{itemize2}

L.E.が考慮していない点(見積もり精度に影響する点)
\begin{itemize2}
\item 立ち上がり遅延時間と立ち下がり遅延時間は異なる
\item 多入力ゲートは入力端子によって遅延時間が異なる
\end{itemize2}
\section{配線遅延}
m→u→n→p→f
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\begin{itemize2}
\item 長さ 2mm
\item 幅 1um
\item シート抵抗 0.08 ohm/square (単位はohm)
\item 容量(/長さ) 0.4 fF/um
\item → 全体容量=幅x容量(/長さ)
\item → ひとつずつの容量は分割数で割る
\item → 全体抵抗=シート抵抗x(長さ/幅)
\item → ひとつずつの抵抗は分割数で割る
\item 分割数は、モデルによってnとは限らない
\end{itemize2}

\section{消費電力}
電力=電圧x電流

\subsection{定常的}
\begin{itemize2}
\item 回路方式に起因する直流電流(CMOSの場合は無い)
\item トランジスタのリーク電流(OFFの筈のトランジスタの漏れ電流)→使わないブロックの電源供給を止める
\end{itemize2}

\subsection{過渡的(論理が切り替わるとき)}
\begin{itemize2}
\item 貫通電流(論理ゲートの入力電圧が遷移する仮定で一時的にNMOSとPMOSの両方を導通して流れる電流)→より大きな論理ゲートの起動に時間がかからないようにする
\item 負荷容量+拡散容量を充放電する電流(本質的に必要)→ゲートを小さくする
\item (対策 両方?)
\begin{itemize2}
\item 動作周波数を落とす(単位時間あたりの電力消費量は下がるが、電力消費量あたりにできる仕事は変わらない)
\item 電源電圧を下げる(下げすぎるとトランジスタの速度が遅くなり動作周波数に影響) 総消費電力(消費電力x実行時間)とdelayの積が最小になる点を動作電圧にしている
\item 並列化
\item 信号変化を抑える(動作率を少なくする)
\end{itemize2}
\end{itemize2}

消費電力$P=\sum C_n \cdot \Delta V \cdot V_{dd} \cdot (\alpha_n / 2) \cdot F$
\begin{itemize2}
\item $C_n$: ゲートnの負荷容量
\item $\Delta V$: 信号の変化レベル. 一般に$=V_{dd}$
\item $V_{dd}$: 電源電圧
\item $\alpha_n$:動作率(1クロックあたりどのくらい信号が変化するか 0→1→0で一回の充放電なので1/2)
\item F: 動作周波数
\end{itemize2}

\section{デジタル集積回路のレイアウト設計}
\begin{itemize2}
\item セルベース設計: 「論理セル」のセットをあらかじめ用意。同じ論理で駆動力(サイズ)が異なるセルを数種類→セルを配置・セル間を配線
\item スタンダードセル: セルの高さをそろえる
\end{itemize2}

\section{システムLSIの設計}
\begin{itemize2}
\item システムLSI: 様々な回路を集積したLSI
\item 応用システムの主要な要素を1チップに集積
\item CPU,メモリ,専用演算回路,IO...
\end{itemize2}

\begin{itemize2}
\item 1. 要求分析、システム使用定義、システム設計
\begin{itemize2}
\item 仕様記述→動作記述(ソフトウェア設計と同様)
\item ソフト/ハードで何を実現するか
\end{itemize2}
\item 2.機能設計、論理設計
\begin{itemize2}
\item 動作合成: 動作記述(e.g.C)→RTL記述(ハードウェア記述言語)
\item 論理合成: RTL記述→論理回路
\end{itemize2}
\item レイアウト設計
\begin{itemize2}
\item 論理回路→LSIマスクパタン
\item フロアプラン、配置・配線
\end{itemize2}
\end{itemize2}

\end{document}
