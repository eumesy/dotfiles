%\documentclass{jarticle}
%\documentclass[twocolumn,fleqn]{jarticle}
\documentclass[fleqn]{jarticle}

\usepackage{multicol}
\usepackage{graphicx}
\usepackage{txfonts}
%\DeclareMathSymbol{v}{\mathalpha}{lettersA}{``33}
\usepackage{bm}
\usepackage{overcite}
 
\textwidth 175mm
\textheight 255mm
 
\addtolength{\topmargin}{-30mm}
\addtolength{\oddsidemargin}{-30mm}
\addtolength{\evensidemargin}{-30mm}
\columnsep 10mm
\columnseprule 0mm
\setlength{\parindent}{1zw}
%\pagestyle{empty}
 
\def\bf{\normalfont\kanjifamily{gt}%
 \selectfont\sffamily}
 
\setcounter{secnumdepth}{4}
\def\thesection{\arabic{section}.\hspace*{-.7em}}
\def\thesubsection{\arabic{section}.\arabic{subsection}\hspace*{-.7em}}
\def\thesubsubsection{%
\arabic{section}.\arabic{subsection}.\arabic{subsubsection}\hspace*{-.7em}}
\def\theparagraph{\alph{paragraph}.\hspace*{-.7em}}
\def\thesubparagraph{\roman{subparagraph})}
 
\makeatletter
\def\section{\@startsection{section}{1}{\z@}%
 {3.5ex plus -0.1ex minus  -.2ex}{0.01ex}{\bf}} %\uppercase
\def\subsection{\@startsection{subsection}{2}{\z@}%
 {3.5ex plus -0.1ex minus  -.2ex}{0.01ex}{\bf}}
\def\subsubsection{\@startsection{subsubsection}{3}{\z@}%
 {-0.01ex}{-1.01em}{\bf}}
\def\paragraph{\@startsection{paragraph}{4}{\z@}%
 {-0.01ex}{-1.01em}{\bf}}
\def\subparagraph{\@startsection{subparagraph}{5}{\z@}%
 {-0.01ex}{-1.01em}{\bf}}
\makeatletter
 
\makeatletter
\long\def\@makecaption#1#2{
 \setbox\@tempboxa\hbox{\small #1 #2}
 \ifdim \wd\@tempboxa > \hsize \unhbox\@tempboxa\par \else \hbox
 to\hsize{\hfil\box\@tempboxa\hfil}
 \fi}
\def\thefigure{\@arabic\c@figure}
\def\fnum@figure{Fig.\thefigure \mbox{ }}
\def\thetable{\@arabic\c@figure} % \def\thetable{\@Roman\c@table}
\def\fnum@table{Table \thetable \mbox{ }}
\makeatletter
 
\def\thebibliography#1{
\section*{参考文献} %\section*{REFERENCES}
 \list
 {[\hfil\arabic{enumi}\hfil]\hspace*{1pt}}{
% \settowidth\labelwidth{[#1]}\leftmargin\labelwidth
 \labelwidth 0pt \leftmargin 0pt
 \topsep 0pt \partopsep 0pt \itemsep 0pt \parsep 0pt
 \rightmargin 0pt \listparindent 0pt \itemindent 0pt
 \labelsep 0pt
 \usecounter{enumi}}
 \sloppy
 \sfcode`\.=1000\relax}
\let\endthebibliography=\endlist
 
\newcommand\ord{{\rm d}}
 
\begin{document}
\twocolumn[%
\begin{flushright}
\today
\end{flushright}
\begin{center}
{\Large\bf \LaTeXe で簡単レポート} \\
\end{center}
\begin{flushright}
大阪大学大学院工学研究科 \\
中 谷 彰 宏{　}
\end{flushright}
]
\section{はじめに(Introduction)}
 
この文書は、うちの研究室の学生さんが、\LaTeX でとりあえず、レポートレ
ベルの文書を作成するための一つの方法について書いている。いわゆる「かっ
こよさ」は追究していない。研究室の諸君の先輩の下川智嗣君(現在、金沢大
学の先生)が整備してくれたものは非常に良くできているのでほんとうに有難
いのだが、過去の集大成ともいうべきこのスタイルファイルの中身を理解する
にはいささか敷居が高く、学生諸氏ばかりか中谷彰宏にとってもメンテナンス
ができなくなりつつあるのも事実。教育的な意味からも少し基本に戻って質素
なものから勉強してもらって、このレベルに達して欲しいという願いから、少
し書き留めることにした。
 
\section{汎用性のある文書}
 
すなわち、いまさら \LaTeX で簡単レポートの話。Lamport 先生の標準のフォー
マットそのままでは、如何にも「\LaTeX で作りました」という形で日本のレ
ポートの様式にそぐわない。これを簡単解決するには奥村晴彦先生の
p\LaTeXe 新ドキュメントクラス(jsarticle)が大変便利で、中
谷彰宏もいつもお世話になっている。ただ、\TeX やMS Wordの文章を$e$メー
ルに添付して送る場合、受け取る相手が同じ環境を持つことを強要するような
ことがあってはよろしくないので、なるべく\LaTeX 本来の仕様のみを使い
\verb+\usepackage+では、メジャーなスタイルファイルの使用のみにとどめる
というのが礼儀かもしれないと思っている。つまり処理系に依存しないできる
だけ質素な文章を書くことも重要であるという意味である。後で述べる個人レ
ベルの定義は、確かに便利だけれども、異文化人と共著で論文を書いたりする
ときの共通語ではなく隠語に近い。また、定義するにしても、相手の手間を最
低限にすることを考えると\verb+*.sty+ などの添付ファイルの個数も最小限
にしたい。そのような意味から、ちょっとした文章を書くときには、プリアン
ブル( \verb+\begin{document}+の前の部分)の定義だけで済ませるというのも
悪くない。これは、\verb+hogehoge.sty+ という同じファイル名で内容の異な
る主流バージョン、亜流バージョンがあちこちにできて混乱することを避ける
という意味もある。
 
それと、latex2html などで HTML文書化する時や、TeXpoint などで、MS
PowerPoint に貼ったりすることを考えても余分な定義やスタイルファイルを
必要としない方が使い勝手がよいということもある。
 
\section{まずは用紙設定}
 
A4縦置きに横書きの前提。美しいページ設定は、用紙の左上から右下、右上か
ら左下に引いた2本の対角線に対して、印字範囲がやや上下にはみ出た状態。
日本語文書に対しては、こんな感じが良いかも。
\begin{verbatim}
\textwidth 175mm
\textheight 255mm
\end{verbatim}
ちなみに、段組するかどうかは自由だが、
\begin{verbatim}
\usepackage{multicol}
\end{verbatim}
を使う場合と、\verb+\documentclass+のオプションで
\begin{verbatim}
\documentclass[twocolumn]{jarticle}
\end{verbatim}
を使う場合がある。この違いによって、
\begin{verbatim}
\addtolength{\topmargin}{-30mm}
\addtolength{\oddsidemargin}{-30mm}
\addtolength{\evensidemargin}{-30mm}
\columnsep 10mm
\columnseprule 0mm
\end{verbatim}
あたりの数字を微調整する必要がでてくる。
 
\section{フォントについて}
\subsection{ゴシック体とボールド体}
 
本当は、\LaTeX 209のコマンドなので使わない方が良いのだと思うけど相変わ
らず \verb+\bf+ を使ってしまう。そうすると、そのままだと半角のゴシック
は、{\normalfont\usefont{OT1}{cmr}{bx}{n} AB 12}である。個人的にはその
ままでも違和感がないが、全角のゴシックは、{\normalfont\gtfamily ＡＢ
１２} だから、ローマンを太くしたものとは少し雰囲気が違う。\TeX\TeX し
ているのが気になる場合には(そこまで、マイクロソフトに合わせる必要はな
いけれど、中谷彰宏も少し丸くなった(?))、
{\normalfont\usefont{OT1}{cmss}{m}{n} AB 12}(サンセリフ)か、
{\normalfont\usefont{OT1}{cmss}{bx}{n} AB 12}(サンセリフのボールドフェー
ス、ちょっと太すぎ)あたりが良いかもしれない。\verb+helvet+パッケージを
使うか、あるいは、
\begin{verbatim}
\usepackage{txfonts}
\end{verbatim}
とする。サンセリフは、{\normalfont\usefont{OT1}{txss}{m}{n} AB 12}にな
るからすっきりする。(なお、\verb+txfonts+ を使うと \verb+bx+ と
\verb+m+ の区別はない)。
 
\begin{verbatim}
\def\bf{\normalfont\kanjifamily{gt}%
 \selectfont\sffamily\bfseries}
\end{verbatim}
としておくと、\verb+{\bf ボールド体(bold face)}+ で、
{\normalfont\kanjifamily{gt}\selectfont\sffamily\bfseries ボールド体
(bold face)}のようになる。これもASCII版の p\TeX の仕様であるので、旧
NTT版のj\TeX との互換性がなくなるということになるが。
 
やっぱり太すぎるという人には、
\begin{verbatim}
\def\bf{\normalfont\kanjifamily{gt}%
 \selectfont\sffamily}
\end{verbatim}
としておくと、\verb+{\bf ボールド体(bold face)}+
で、{\normalfont\kanjifamily{gt}\selectfont\sffamily
ボールド体(bold face)}のようになる。
 
\verb+txfonts+は、綺麗な出力に不可欠で、中谷彰宏も多用しているが、これ
もダウンロードとインストールを万人に強いることはよろしくないので、使え
ない環境でも読める文書を作成すべきである。(といいながら、この文章では、
以下では \verb+txfonts+ を使うことを前提に話を進めているので注意。) 否
定的な意見も多いが、その理由の大半は、例えば、数式中の\verb+v+ とギリ
シャ文字の\verb+\nu+の区別がつきにくいというような話である。
\verb+txfonts+ を使わないもともとの数式中でのｖ(v) は、Computer Modern
フォントでは、{\usefont{OML}{cmm}{m}{it} v} (もともとのν$\nu$はわかり
やすいのだけれどこの文章でどうやったら書けるのかな？)ならば問題がない
が、\verb+txfonts+ を使った場合、v({\usefont{OML}{txmi}{m}{it} v})と、
\verb+\nu+($\nu$)が、全く区別がつかないということである。これは、
\begin{verbatim}
\usepackage[varg]{txfonts}
\end{verbatim}
とすればよいらしい。ただ、これだと、$w$や$g$も形が変わる。結局、少し複
雑だが、
\begin{verbatim}
\usepackage{txfonts}
% \DeclareMathSymbol{v}{\mathalpha}{lettersA}{``33}
\end{verbatim}
として、v, $v$, $\bm{v}$ のような形にするのがよさそうだ。
 
印刷や、PDFとの絡みを含んで、フォントの話は奥が深いのできりがないが、
この文書の趣旨ではないので、この辺りでやめる。
 
\subsection{章立て(章、節、項)と番号付け}
 
章(chapter)、節(section)、項(subsection)、パラグラフ(paragraph)、副パ
ラグラフ(subparagraph)だが、今回の趣旨は論文の投稿スタイルを作る話では
ないので余計な話ではあるが、(社)日本機械学会論文集では、章は、1., 2.,
3., 節は、1.1, 1.2, 1.3 項は、1.1.1, 1.1.2, 1.1.3 小見出し a., b.,
c. と呼ぶから一つ階層がずれている。また、日本機械学会論文集のフォーマッ
トでは、「.」節以降の数字間のピリオドは中点「・」だが、普通の文書では、
ピリオドの方がおさまりが良いかもしれない。それから、\verb+section+の番
号にピリオドがつかないのも日本語文書では違和感があるのでつけておこう。
結局以下のような番号の定義。なお、\verb+\paragraph+までに番号をつける。
\begin{verbatim}
\setcounter{secnumdepth}{4}
\def\thesection{\arabic{section}.%
  \hspace*{-.7em}}
\def\thesubsection{\arabic{section}.%
  \arabic{subsection}\hspace*{-.7em}}
\def\thesubsubsection{%
  \arabic{section}.\arabic{subsection}.%
  \arabic{subsubsection}\hspace*{-.7em}}
\def\theparagraph{\alph{paragraph}.%
  \hspace*{-.7em}}
\def\thesubparagraph{%
  \roman{subparagraph})}
\end{verbatim}
 
\verb+\section+, \verb+\subsection+, \verb+\subsubsection+,
\verb+\paragraph+, \verb+\subparagraph+ についても、もともとの仕様では
「ここから始まりますよ」と目立ちすぎて仰々しい。レポート的な用途に限る
と、本文と同じ程度の文字サイズで強調やアンダーラインなどで済ませること
が多い。また、紙面の節約の観点から、\verb+\section+,
\verb+\subsection+が、本文に続く場合には、\verb+\section+,
\verb+\subsection+が、1行空ける(空白行を入れる)こととし、
\verb+\section+と\verb+\subsection+が続いて、間に本文がない場合には単
なる改行(空白行を)入れないとしよう。
 
\begin{verbatim}
\makeatletter
\def\section{\@startsection{section}%
 {1}{\z@}{3.5ex plus -0.1ex minus  -.2ex}%
 {0.01ex}{\bf}}
\def\subsection{\@startsection{subsection}%
 {2}{\z@}{3.5ex plus -0.1ex minus  -.2ex}%
 {0.01ex}{\bf}}
\def\subsubsection{\@startsection{%
 subsubsection}{3}{\z@}{-0.01ex}{-1.01em}{\bf}}
\def\paragraph{\@startsection{paragraph}%
 {4}{\z@}{-0.01ex}{-1.01em}{\bf}}
\def\subparagraph{\@startsection{%
 subparagraph}{5}{\z@}{-0.01ex}{-1.01em}{\bf}}
\makeatletter
\end{verbatim}
\verb+\@startsection+は、階層の深さ、字下げ(indent)、前文との改行幅(マ
イナスの時には空白行を入れない)、後文との改行幅(マイナスの時は改行せず
文章までの距離)、文字種を意味する。\verb+ex+ は、xの文字の高さ、
\verb+em+は、Mの文字の幅、日本語だと \verb+zh+, \verb+zw+とすべきかも
しれない。これらは長さの単位だからもちろん自由に使って良いが、
\verb+\hspace*{1zh}+とか、\verb+\vspace*{1zw}+とかすると常識が疑われる
かも。文字種では、\verb+\bf+の他に英語で全部大文字にする
\verb+\uppercase+なども良く使う。
 
\begin{flushright}
うーんなかなか進まんな。未完成(今日はこのあたりで、続きは次回)。
\end{flushright}
\end{document}
